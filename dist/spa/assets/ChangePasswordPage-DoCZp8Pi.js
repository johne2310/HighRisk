import{f as n,c as h,o as i,w as d,u as b,a,Q as C,j as p,k as g,a3 as v,a0 as f,l as w,n as Q,a2 as _}from"./index-VMwhEE9h.js";import{Q as V}from"./QForm-D_53xN_L.js";import{Q as x}from"./QPage-UdE7IJMk.js";import{u as k}from"./use-quasar-DuZsRZJn.js";import{e as B}from"./index-l8rJi2A4.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"text-red"},U={key:1,class:"text-green"},E={__name:"ChangePasswordPage",setup(F){const l=n(""),c=n(""),o=n(!1),r=n(null),t=n(null),y=b(),m=k(),P=async()=>{o.value=!0,r.value=null,t.value=null,console.log("New Password: ",l.value);try{const{error:u}=await B.auth.updateUser({password:l.value});if(u)throw new Error(u.message);t.value="Password changed successfully! Redirecting to login...",m.notify({color:"positive",message:t.value,icon:"check_circle"}),setTimeout(()=>{y.push("/login")},2e3)}catch(u){r.value=u.message||"An unexpected error occurred.",m.notify({color:"negative",message:r.value,icon:"warning"})}finally{o.value=!1}};return(u,s)=>(i(),h(x,{class:"reset-password",padding:""},{default:d(()=>[a(C,null,{default:d(()=>[a(p,null,{default:d(()=>s[2]||(s[2]=[g("div",{class:"text-h5"},"Change Password",-1)])),_:1}),a(p,null,{default:d(()=>[a(V,{onSubmit:P,class:"q-gutter-md"},{default:d(()=>[a(w,{filled:"",type:"password",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),label:"New Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e.length>=6||"Use at least 6 characters"]},null,8,["modelValue","rules"]),a(w,{filled:"",type:"password",modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),label:"Confirm Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e===l.value||"Passwords do not match"]},null,8,["modelValue","rules"]),g("div",null,[a(Q,{color:"primary",type:"submit",label:o.value?"Loading...":"Change Password",loading:o.value,disable:o.value},null,8,["label","loading","disable"])]),r.value?(i(),v("div",q,_(r.value),1)):f("",!0),t.value?(i(),v("div",U,_(t.value),1)):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},D=N(E,[["__scopeId","data-v-b217884f"]]);export{D as default};
