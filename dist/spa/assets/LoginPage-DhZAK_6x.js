import{b as U,i as C,g as E,e as L,u as A,f as c,h as I,j as D,c as B,o as K,w as o,k as $,l as N,a as s,Q as h,m as w,n as r,p as _,q as P,s as m,t as z,v as M,x as R,y as Z}from"./index-DwViWMxj.js";import{Q as q}from"./QForm-BTrNh0kL.js";import{Q as F}from"./QPage-Cjtquu-L.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";function V(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const a=parseInt(t,10);return isNaN(a)?0:a}const H=U({name:"close-popup",beforeMount(t,{value:a}){const i={depth:V(a),handler(n){i.depth!==0&&setTimeout(()=>{const u=E(t);u!==void 0&&L(u,n,i.depth)})},handlerKey(n){C(n,13)===!0&&i.handler(n)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:a,oldValue:i}){a!==i&&(t.__qclosepopup.depth=V(a))},beforeUnmount(t){const a=t.__qclosepopup;t.removeEventListener("click",a.handler),t.removeEventListener("keyup",a.handlerKey),delete t.__qclosepopup}}),O={class:"q-mt-md"},T={class:"text-center q-mt-sm"},W={class:"text-center"},G={class:"q-mt-md"},J={__name:"LoginPage",setup(t){const a=$(),i=N(),n=A(),u=c(!0),d=I(()=>n.loading),v=c(!1),f=c(""),g=c(""),y=c(!0),x=b=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(b)||"Invalid email format",p=D({email:"",password:""}),k=()=>{i.push("/reset-password")},Q=()=>{n.signInWithMagicLink(p.email)},S=()=>{console.log("credentials: ",f.value,g.value);const{success:b,error:e}=n.registerUser({email:f.value,password:g.value});b?(a.notify({color:"positive",message:"Sign up successful! Please check your email for verification.",icon:"check_circle",closeBtn:"OK"}),v.value=!1):a.notify({color:"negative",message:e||"Sign up failed",icon:"error",position:"bottom",timeout:1e3,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})};return(b,e)=>(K(),B(F,{padding:"",class:"flex flex-center"},{default:o(()=>[s(h,{class:"auth-card"},{default:o(()=>[s(w,{class:"text-center"},{default:o(()=>e[8]||(e[8]=[r("div",{class:"text-h4 text-primary q-mb-md"},"High Risk Patient Medication Audit",-1),r("div",{class:"text-subtitle1 q-mb-lg"},"Please sign in to continue",-1)])),_:1}),s(w,null,{default:o(()=>[s(q,{onSubmit:Q,class:"q-gutter-md"},{default:o(()=>[s(_,{modelValue:p.email,"onUpdate:modelValue":e[0]||(e[0]=l=>p.email=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(_,{modelValue:p.password,"onUpdate:modelValue":e[2]||(e[2]=l=>p.password=l),label:"Password",type:u.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required"]},{append:o(()=>[s(P,{name:u.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=l=>u.value=!u.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",O,[s(m,{label:"Sign In",type:"submit",color:"primary",class:"full-width",loading:d.value},null,8,["loading"])]),r("div",T,[s(m,{flat:"",color:"primary",label:"Forgot Password?",onClick:k,disable:d.value},null,8,["disable"])]),s(z,{class:"q-my-md"}),r("div",W,[e[9]||(e[9]=r("p",{class:"text-grey-8"},"Don't have an account?",-1)),s(m,{outline:"",color:"secondary",label:"Sign Up",class:"full-width",onClick:e[3]||(e[3]=l=>v.value=!0),disable:d.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1}),s(M,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=l=>v.value=l)},{default:o(()=>[s(h,{style:{"min-width":"350px"}},{default:o(()=>[s(w,{class:"text-center"},{default:o(()=>e[10]||(e[10]=[r("div",{class:"text-h6"},"Create Account",-1)])),_:1}),s(w,null,{default:o(()=>[s(q,{onSubmit:S,class:"q-gutter-md"},{default:o(()=>[s(_,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(_,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),label:"Password",type:y.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required",l=>l.length>=6||"Password must be at least 6 characters"]},{append:o(()=>[s(P,{name:y.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[5]||(e[5]=l=>y.value=!y.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",G,[s(m,{label:"Sign Up",type:"submit",color:"secondary",class:"full-width",loading:d.value},null,8,["loading"])])]),_:1})]),_:1}),s(R,{align:"right"},{default:o(()=>[Z(s(m,{flat:"",label:"Cancel",color:"primary",disable:d.value},null,8,["disable"]),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},se=j(J,[["__scopeId","data-v-03a1f8cf"]]);export{se as default};
