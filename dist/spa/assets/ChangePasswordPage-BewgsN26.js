import{j as t,u as x,c as V,o as c,w as o,f as k,h as B,a,v as S,q as f,m as w,A as P,B as y,Q as h,n as _,p as U,D as b}from"./index-CmkbYhrZ.js";import{Q as D}from"./QForm-DyGUcDNE.js";import{Q as N}from"./QPage-856Hz50I.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={key:0,class:"text-red"},F={key:1,class:"text-green"},z={__name:"ChangePasswordPage",setup(A){const r=t(""),v=t(""),u=t(!1),d=t(null),n=t(null),l=t(!0),p=k(),i=x(),{showSuccess:C,showError:g}=B(),Q=async()=>{if(u.value=!0,d.value=null,n.value=null,console.log("New Password: ",r.value),i.userDetails.id){console.log("User ID is logged: ",i.userDetails.id);let m=await i.changePassword(r.value);const{success:s,error:e}=m;s&&(C("Password changed successfully!"),n.value="",p.push("/dashboard")),e&&g(e.message)}else console.log("User is not logged: "),g("User is not logged in. Please login to change password."),p.push("/auth/login");u.value=!1};return(m,s)=>(c(),V(N,{class:"reset-password",padding:""},{default:o(()=>[a(S,null,{default:o(()=>[a(f,null,{default:o(()=>s[4]||(s[4]=[w("div",{class:"text-h5"},"Change Password",-1)])),_:1}),a(f,null,{default:o(()=>[a(D,{onSubmit:Q,class:"q-gutter-md"},{default:o(()=>[a(h,{filled:"",type:l.value?"password":"text",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),label:"New Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e.length>=6||"Use at least 6 characters"]},{append:o(()=>[a(_,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[0]||(s[0]=e=>l.value=!l.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),a(h,{filled:"",type:l.value?"password":"text",modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),label:"Confirm Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e===r.value||"Passwords do not match"]},{append:o(()=>[a(_,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>l.value=!l.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),w("div",null,[a(U,{color:"primary",type:"submit",label:u.value?"Loading...":"Change Password",loading:u.value,disable:u.value},null,8,["label","loading","disable"])]),d.value?(c(),P("div",I,b(d.value),1)):y("",!0),n.value?(c(),P("div",F,b(n.value),1)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},M=q(z,[["__scopeId","data-v-d23ad0a8"]]);export{M as default};
