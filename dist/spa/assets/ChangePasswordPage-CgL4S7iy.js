import{f as u,c as C,o as i,w as n,u as Q,a,Q as b,j as p,k as g,a3 as v,a0 as f,l as w,n as V,a2 as _}from"./index-Cq1drUi_.js";import{Q as x}from"./QForm-B75Yrufq.js";import{Q as k}from"./QPage-8R3aU5WS.js";import{useAuthStore as B}from"./auth-store-BcpdERez.js";import{u as S}from"./use-quasar-Bd225bGK.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BJ1ar2fB.js";const N={key:0,class:"text-red"},U={key:1,class:"text-green"},E={__name:"ChangePasswordPage",setup(F){const d=u(""),c=u(""),l=u(!1),o=u(null),r=u(null),h=Q(),y=B(),m=S(),P=async()=>{l.value=!0,o.value=null,r.value=null;try{const{error:t}=await y.supabase.auth.updateUser({password:d.value});if(t)throw new Error(t.message);r.value="Password changed successfully! Redirecting to login...",m.notify({color:"positive",message:r.value,icon:"check_circle"}),setTimeout(()=>{h.push("/login")},2e3)}catch(t){o.value=t.message||"An unexpected error occurred.",m.notify({color:"negative",message:o.value,icon:"warning"})}finally{l.value=!1}};return(t,s)=>(i(),C(k,{class:"reset-password",padding:""},{default:n(()=>[a(b,null,{default:n(()=>[a(p,null,{default:n(()=>s[2]||(s[2]=[g("div",{class:"text-h5"},"Change Password",-1)])),_:1}),a(p,null,{default:n(()=>[a(x,{onSubmit:P,class:"q-gutter-md"},{default:n(()=>[a(w,{filled:"",type:"password",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),label:"New Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e.length>=6||"Use at least 6 characters"]},null,8,["modelValue","rules"]),a(w,{filled:"",type:"password",modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),label:"Confirm Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e===d.value||"Passwords do not match"]},null,8,["modelValue","rules"]),g("div",null,[a(V,{color:"primary",type:"submit",label:l.value?"Loading...":"Change Password",loading:l.value,disable:l.value},null,8,["label","loading","disable"])]),o.value?(i(),v("div",N,_(o.value),1)):f("",!0),r.value?(i(),v("div",U,_(r.value),1)):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},M=q(E,[["__scopeId","data-v-3ee947cc"]]);export{M as default};
