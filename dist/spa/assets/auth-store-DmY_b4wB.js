import{am as c,f as o,h as g}from"./index-CwmJJaBZ.js";import{s as n}from"./index-BUCxf39b.js";const p=c("auth",()=>{const u=o(null),s=o(!0),a=o(null),i=g(()=>!!u.value);return{user:u,loading:s,error:a,isAuthenticated:i,initialize:async()=>{s.value=!0,a.value=null;try{const{data:{session:e},error:r}=await n.auth.getSession();if(r)throw r;e?u.value=e.user:u.value=null}catch(e){console.error("Error initializing auth store:",e),a.value=e.message,u.value=null}finally{s.value=!1}n.auth.onAuthStateChange((e,r)=>{r?u.value=r.user:u.value=null})},signIn:async(e,r)=>{s.value=!0,a.value=null;try{const{data:t,error:l}=await n.auth.signInWithPassword({email:e,password:r});if(l)throw l;return u.value=t.user,console.log("User is: ",u),{success:!0}}catch(t){return console.error("Error signing in:",t),a.value=t.message,{success:!1,error:t.message}}finally{s.value=!1}},signUp:async(e,r)=>{s.value=!0,a.value=null;try{const{data:t,error:l}=await n.auth.signUp({email:e,password:r});if(l)throw l;return{success:!0,data:t}}catch(t){return console.error("Error signing up:",t),a.value=t.message,{success:!1,error:t.message}}finally{s.value=!1}},signOut:async()=>{s.value=!0,a.value=null;try{const{error:e}=await n.auth.signOut();if(e)throw e;return u.value=null,{success:!0}}catch(e){return console.error("Error signing out:",e),a.value=e.message,{success:!1,error:e.message}}finally{s.value=!1}},resetPassword:async e=>{s.value=!0,a.value=null;try{const{error:r}=await n.auth.resetPasswordForEmail(e);if(r)throw r;return{success:!0}}catch(r){return console.error("Error resetting password:",r),a.value=r.message,{success:!1,error:r.message}}finally{s.value=!1}}}});export{p as useAuthStore};
