import{b as S,i as C,g as E,e as A,u as L,f as c,h as D,j as I,c as B,o as K,w as o,k as $,l as N,a as s,Q as P,m as w,n as r,p as _,q as h,s as m,t as z,v as R,x as Z,y as F}from"./index-CFvj3fyk.js";import{Q as q}from"./QForm-DIFtaur8.js";import{Q as M}from"./QPage-Ck0ac_fP.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";function V(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const a=parseInt(t,10);return isNaN(a)?0:a}const H=S({name:"close-popup",beforeMount(t,{value:a}){const i={depth:V(a),handler(n){i.depth!==0&&setTimeout(()=>{const u=E(t);u!==void 0&&A(u,n,i.depth)})},handlerKey(n){C(n,13)===!0&&i.handler(n)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:a,oldValue:i}){a!==i&&(t.__qclosepopup.depth=V(a))},beforeUnmount(t){const a=t.__qclosepopup;t.removeEventListener("click",a.handler),t.removeEventListener("keyup",a.handlerKey),delete t.__qclosepopup}}),O={class:"q-mt-md"},T={class:"text-center q-mt-sm"},G={class:"text-center"},J={class:"q-mt-md"},W={__name:"LoginPage",setup(t){const a=$(),i=N(),n=L(),u=c(!0),d=D(()=>n.loading),v=c(!1),f=c(""),g=c(""),b=c(!0),x=y=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(y)||"Invalid email format",p=I({email:"",password:""}),U=()=>{i.push("/reset-password")},k=()=>{n.loginUser(p)},Q=()=>{console.log("credentials: ",f.value,g.value);const{success:y,error:e}=n.registerUser({email:f.value,password:g.value});y?(a.notify({color:"positive",message:"Sign up successful! Please check your email for verification.",icon:"check_circle",closeBtn:"OK"}),v.value=!1):a.notify({color:"negative",message:e||"Sign up failed",icon:"error",position:"bottom",timeout:1e3,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})};return(y,e)=>(K(),B(M,{padding:"",class:"flex flex-center"},{default:o(()=>[s(P,{class:"auth-card"},{default:o(()=>[s(w,{class:"text-center"},{default:o(()=>e[8]||(e[8]=[r("div",{class:"text-h4 text-primary q-mb-md"},"High Risk Patient Medication Audit",-1),r("div",{class:"text-subtitle1 q-mb-lg"},"Please sign in to continue",-1)])),_:1}),s(w,null,{default:o(()=>[s(q,{onSubmit:k,class:"q-gutter-md"},{default:o(()=>[s(_,{modelValue:p.email,"onUpdate:modelValue":e[0]||(e[0]=l=>p.email=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(_,{modelValue:p.password,"onUpdate:modelValue":e[2]||(e[2]=l=>p.password=l),label:"Password",type:u.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required"]},{append:o(()=>[s(h,{name:u.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=l=>u.value=!u.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",O,[s(m,{label:"Sign In",type:"submit",color:"primary",class:"full-width",loading:d.value},null,8,["loading"])]),r("div",T,[s(m,{flat:"",color:"primary",label:"Forgot Password?",onClick:U,disable:d.value},null,8,["disable"])]),s(z,{class:"q-my-md"}),r("div",G,[e[9]||(e[9]=r("p",{class:"text-grey-8"},"Don't have an account?",-1)),s(m,{outline:"",color:"secondary",label:"Sign Up",class:"full-width",onClick:e[3]||(e[3]=l=>v.value=!0),disable:d.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1}),s(R,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=l=>v.value=l)},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(w,{class:"text-center"},{default:o(()=>e[10]||(e[10]=[r("div",{class:"text-h6"},"Create Account",-1)])),_:1}),s(w,null,{default:o(()=>[s(q,{onSubmit:Q,class:"q-gutter-md"},{default:o(()=>[s(_,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(_,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),label:"Password",type:b.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required",l=>l.length>=6||"Password must be at least 6 characters"]},{append:o(()=>[s(h,{name:b.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[5]||(e[5]=l=>b.value=!b.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",J,[s(m,{label:"Sign Up",type:"submit",color:"secondary",class:"full-width",loading:d.value},null,8,["loading"])])]),_:1})]),_:1}),s(Z,{align:"right"},{default:o(()=>[F(s(m,{flat:"",label:"Cancel",color:"primary",disable:d.value},null,8,["disable"]),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},se=j(W,[["__scopeId","data-v-b930f43a"]]);export{se as default};
