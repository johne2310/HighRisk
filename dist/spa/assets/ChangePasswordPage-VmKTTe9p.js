import{j as t,u as x,c as V,o as c,w as o,f as k,h as B,a,v as S,q as f,m as g,A as w,B as y,Q as P,n as _,p as D,D as h}from"./index-CEJet-6z.js";import{Q as N}from"./QForm-CCQUbe-V.js";import{Q as U}from"./QPage-JXBaRaDt.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={key:0,class:"text-red"},F={key:1,class:"text-green"},z={__name:"ChangePasswordPage",setup(A){const r=t(""),v=t(""),u=t(!1),n=t(null),d=t(null),l=t(!0),p=k(),i=x(),{showSuccess:b,showError:C}=B(),Q=async()=>{if(u.value=!0,n.value=null,d.value=null,console.log("New Password: ",r.value),i.userDetails.id){console.log("User ID is logged: ",i.userDetails.id);let m=await i.changePassword(r.value);const{success:s,error:e}=m;s&&(b("Password changed successfully!"),p.push("/dashboard")),e&&C(e.message)}else console.log("User is not logged: "),p.push("/auth/login");u.value=!1};return(m,s)=>(c(),V(U,{class:"reset-password",padding:""},{default:o(()=>[a(S,null,{default:o(()=>[a(f,null,{default:o(()=>s[4]||(s[4]=[g("div",{class:"text-h5"},"Change Password",-1)])),_:1}),a(f,null,{default:o(()=>[a(N,{onSubmit:Q,class:"q-gutter-md"},{default:o(()=>[a(P,{filled:"",type:l.value?"password":"text",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),label:"New Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e.length>=6||"Use at least 6 characters"]},{append:o(()=>[a(_,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[0]||(s[0]=e=>l.value=!l.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),a(P,{filled:"",type:l.value?"password":"text",modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),label:"Confirm Password","lazy-rules":"",rules:[e=>!!e||"Field is required",e=>e===r.value||"Passwords do not match"]},{append:o(()=>[a(_,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>l.value=!l.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),g("div",null,[a(D,{color:"primary",type:"submit",label:u.value?"Loading...":"Change Password",loading:u.value,disable:u.value},null,8,["label","loading","disable"])]),n.value?(c(),w("div",I,h(n.value),1)):y("",!0),d.value?(c(),w("div",F,h(d.value),1)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},M=q(z,[["__scopeId","data-v-3f453f81"]]);export{M as default};
