import{b as Q,i as S,g as U,e as C,u as E,f as p,h as L,c as A,o as I,w as o,j as D,a as t,Q as x,k as v,l as r,m as h,n as m,p as B,q as K,s as N,t as $,v as z}from"./index-BDgeXPCL.js";import{Q as w}from"./QForm-CIDWWiOS.js";import{Q as M}from"./QPage-DzTYoHk0.js";import{u as R}from"./use-quasar-CKh2QwEi.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";function P(a){if(a===!1)return 0;if(a===!0||a===void 0)return 1;const l=parseInt(a,10);return isNaN(l)?0:l}const F=Q({name:"close-popup",beforeMount(a,{value:l}){const i={depth:P(l),handler(n){i.depth!==0&&setTimeout(()=>{const u=U(a);u!==void 0&&C(u,n,i.depth)})},handlerKey(n){S(n,13)===!0&&i.handler(n)}};a.__qclosepopup=i,a.addEventListener("click",i.handler),a.addEventListener("keyup",i.handlerKey)},updated(a,{value:l,oldValue:i}){l!==i&&(a.__qclosepopup.depth=P(l))},beforeUnmount(a){const l=a.__qclosepopup;a.removeEventListener("click",l.handler),a.removeEventListener("keyup",l.handlerKey),delete a.__qclosepopup}}),j={class:"q-mt-md"},H={class:"text-center q-mt-sm"},T={class:"text-center"},W={class:"q-mt-md"},G={__name:"LoginPage",setup(a){const l=R(),i=D(),n=E(),u=p(""),c=L(()=>n.loading),f=p(!1),y=p(""),b=p(""),g=p(!0),_=d=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(d)||"Invalid email format",q=()=>{i.push("/reset-password")},k=async()=>{const{success:d,error:e}=await n.signInWithMagicLink(u.value);d?(l.notify({color:"positive",message:"Login successful",icon:"check_circle"}),await i.push("/dashboard")):l.notify({color:"negative",message:e||"Login failed",icon:"error"})},V=async()=>{const{success:d,error:e}=await n.signUp(y.value,b.value);d?(l.notify({color:"positive",message:"Sign up successful! Please check your email for verification.",icon:"check_circle"}),f.value=!1):l.notify({color:"negative",message:e||"Sign up failed",icon:"error"})};return(d,e)=>(I(),A(M,{padding:"",class:"flex flex-center"},{default:o(()=>[t(x,{class:"auth-card"},{default:o(()=>[t(v,{class:"text-center"},{default:o(()=>e[6]||(e[6]=[r("div",{class:"text-h4 text-primary q-mb-md"},"High Risk Patient Medication Audit",-1),r("div",{class:"text-subtitle1 q-mb-lg"},"Please sign in to continue",-1)])),_:1}),t(v,null,{default:o(()=>[t(w,{onSubmit:k,class:"q-gutter-md"},{default:o(()=>[t(h,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),label:"Email",type:"email",outlined:"",rules:[s=>!!s||"Email is required",_]},null,8,["modelValue","rules"]),r("div",j,[t(m,{label:"Sign In",type:"submit",color:"primary",class:"full-width",loading:c.value},null,8,["loading"])]),r("div",H,[t(m,{flat:"",color:"primary",label:"Forgot Password?",onClick:q,disable:c.value},null,8,["disable"])]),t(B,{class:"q-my-md"}),r("div",T,[e[7]||(e[7]=r("p",{class:"text-grey-8"},"Don't have an account?",-1)),t(m,{outline:"",color:"secondary",label:"Sign Up",class:"full-width",onClick:e[1]||(e[1]=s=>f.value=!0),disable:c.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1}),t(K,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s)},{default:o(()=>[t(x,{style:{"min-width":"350px"}},{default:o(()=>[t(v,{class:"text-center"},{default:o(()=>e[8]||(e[8]=[r("div",{class:"text-h6"},"Create Account",-1)])),_:1}),t(v,null,{default:o(()=>[t(w,{onSubmit:V,class:"q-gutter-md"},{default:o(()=>[t(h,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s),label:"Email",type:"email",outlined:"",rules:[s=>!!s||"Email is required",_]},null,8,["modelValue","rules"]),t(h,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=s=>b.value=s),label:"Password",type:g.value?"password":"text",outlined:"",rules:[s=>!!s||"Password is required",s=>s.length>=6||"Password must be at least 6 characters"]},{append:o(()=>[t(N,{name:g.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[3]||(e[3]=s=>g.value=!g.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",W,[t(m,{label:"Sign Up",type:"submit",color:"secondary",class:"full-width",loading:c.value},null,8,["loading"])])]),_:1})]),_:1}),t($,{align:"right"},{default:o(()=>[z(t(m,{flat:"",label:"Cancel",color:"primary",disable:c.value},null,8,["disable"]),[[F]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},te=Z(G,[["__scopeId","data-v-216a97a2"]]);export{te as default};
