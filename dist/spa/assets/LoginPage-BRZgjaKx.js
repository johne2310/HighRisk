import{b as C,i as E,g as L,e as A,f as u,h as I,c as D,o as $,w as o,u as B,a as s,Q as P,j as y,k as r,l as b,m as q,n as m,p as K,q as N,s as z,t as R}from"./index-VMwhEE9h.js";import{Q as V}from"./QForm-D_53xN_L.js";import{Q as Z}from"./QPage-UdE7IJMk.js";import{u as F}from"./use-quasar-DuZsRZJn.js";import{useAuthStore as M}from"./auth-store-DhGzEIdR.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-l8rJi2A4.js";function k(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const a=parseInt(t,10);return isNaN(a)?0:a}const H=C({name:"close-popup",beforeMount(t,{value:a}){const i={depth:k(a),handler(n){i.depth!==0&&setTimeout(()=>{const d=L(t);d!==void 0&&A(d,n,i.depth)})},handlerKey(n){E(n,13)===!0&&i.handler(n)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:a,oldValue:i}){a!==i&&(t.__qclosepopup.depth=k(a))},beforeUnmount(t){const a=t.__qclosepopup;t.removeEventListener("click",a.handler),t.removeEventListener("keyup",a.handlerKey),delete t.__qclosepopup}}),T={class:"q-mt-md"},G={class:"text-center q-mt-sm"},J={class:"text-center"},O={class:"q-mt-md"},W={__name:"LoginPage",setup(t){const a=F(),i=B(),n=M(),d=u(""),w=u(""),f=u(!0),p=I(()=>n.loading),v=u(!1),_=u(""),h=u(""),g=u(!0),x=c=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(c)||"Invalid email format",Q=()=>{i.push("/reset-password")},S=async()=>{const{success:c,error:e}=await n.signIn(d.value,w.value);c?(a.notify({color:"positive",message:"Login successful",icon:"check_circle"}),await i.push("/dashboard")):a.notify({color:"negative",message:e||"Login failed",icon:"error"})},U=async()=>{const{success:c,error:e}=await n.signUp(_.value,h.value);c?(a.notify({color:"positive",message:"Sign up successful! Please check your email for verification.",icon:"check_circle"}),v.value=!1):a.notify({color:"negative",message:e||"Sign up failed",icon:"error"})};return(c,e)=>($(),D(Z,{padding:"",class:"flex flex-center"},{default:o(()=>[s(P,{class:"auth-card"},{default:o(()=>[s(y,{class:"text-center"},{default:o(()=>e[8]||(e[8]=[r("div",{class:"text-h4 text-primary q-mb-md"},"High Risk Patient Medication Audit",-1),r("div",{class:"text-subtitle1 q-mb-lg"},"Please sign in to continue",-1)])),_:1}),s(y,null,{default:o(()=>[s(V,{onSubmit:S,class:"q-gutter-md"},{default:o(()=>[s(b,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(b,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=l=>w.value=l),label:"Password",type:f.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required"]},{append:o(()=>[s(q,{name:f.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=l=>f.value=!f.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",T,[s(m,{label:"Sign In",type:"submit",color:"primary",class:"full-width",loading:p.value},null,8,["loading"])]),r("div",G,[s(m,{flat:"",color:"primary",label:"Forgot Password?",onClick:Q,disable:p.value},null,8,["disable"])]),s(K,{class:"q-my-md"}),r("div",J,[e[9]||(e[9]=r("p",{class:"text-grey-8"},"Don't have an account?",-1)),s(m,{outline:"",color:"secondary",label:"Sign Up",class:"full-width",onClick:e[3]||(e[3]=l=>v.value=!0),disable:p.value},null,8,["disable"])])]),_:1})]),_:1})]),_:1}),s(N,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=l=>v.value=l)},{default:o(()=>[s(P,{style:{"min-width":"350px"}},{default:o(()=>[s(y,{class:"text-center"},{default:o(()=>e[10]||(e[10]=[r("div",{class:"text-h6"},"Create Account",-1)])),_:1}),s(y,null,{default:o(()=>[s(V,{onSubmit:U,class:"q-gutter-md"},{default:o(()=>[s(b,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),label:"Email",type:"email",outlined:"",rules:[l=>!!l||"Email is required",x]},null,8,["modelValue","rules"]),s(b,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=l=>h.value=l),label:"Password",type:g.value?"password":"text",outlined:"",rules:[l=>!!l||"Password is required",l=>l.length>=6||"Password must be at least 6 characters"]},{append:o(()=>[s(q,{name:g.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[5]||(e[5]=l=>g.value=!g.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",O,[s(m,{label:"Sign Up",type:"submit",color:"secondary",class:"full-width",loading:p.value},null,8,["loading"])])]),_:1})]),_:1}),s(z,{align:"right"},{default:o(()=>[R(s(m,{flat:"",label:"Cancel",color:"primary",disable:p.value},null,8,["disable"]),[[H]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},oe=j(W,[["__scopeId","data-v-22215c31"]]);export{oe as default};
