import{f as n,_ as C,c as E,o as i,w as d,u as S,a as s,Q as V,j as m,k as f,a3 as p,a0 as v,l as w,n as b,a2 as _}from"./index-BfErK7H1.js";import{Q}from"./QForm-BTWFiWtq.js";import{Q as I}from"./QPage-DQCk84vw.js";import{u as N}from"./use-quasar-Dkyf0_Oi.js";import{e as P}from"./index-CiBqgyOh.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={key:0,class:"text-red"},k={key:1,class:"text-green"},R={__name:"ChangePasswordPage",setup(A){const o=n(""),c=n(""),r=n(!1),t=n(null),u=n(null),h=S(),g=N();C(()=>{console.log("Change Password Page"),P.auth.onAuthStateChange(e=>{e==="SIGNED_IN"?console.log("Signed in"):e==="SIGNED_OUT"?console.log("Signed out"):e==="PASSWORD_RECOVERY"?console.log("Password recovery"):e==="EMAIL_VERIFICATION"?console.log("Email verification"):e==="USER_UPDATED"&&console.log("User updated")})});const y=async()=>{r.value=!0,t.value=null,u.value=null,console.log("New Password: ",o.value);try{const{error:e}=await P.auth.updateUser({password:o.value});if(e)throw new Error(e.message);u.value="Password changed successfully! Redirecting to login...",g.notify({color:"positive",message:u.value,icon:"check_circle"}),setTimeout(()=>{h.push("/dashboard")},2e3)}catch(e){t.value=e.message||"An unexpected error occurred.",g.notify({color:"negative",message:t.value,icon:"warning"})}finally{r.value=!1}};return(e,l)=>(i(),E(I,{class:"reset-password",padding:""},{default:d(()=>[s(V,null,{default:d(()=>[s(m,null,{default:d(()=>l[2]||(l[2]=[f("div",{class:"text-h5"},"Change Password",-1)])),_:1}),s(m,null,{default:d(()=>[s(Q,{onSubmit:y,class:"q-gutter-md"},{default:d(()=>[s(w,{filled:"",type:"password",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value=a),label:"New Password","lazy-rules":"",rules:[a=>!!a||"Field is required",a=>a.length>=6||"Use at least 6 characters"]},null,8,["modelValue","rules"]),s(w,{filled:"",type:"password",modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=a=>c.value=a),label:"Confirm Password","lazy-rules":"",rules:[a=>!!a||"Field is required",a=>a===o.value||"Passwords do not match"]},null,8,["modelValue","rules"]),f("div",null,[s(b,{color:"primary",type:"submit",label:r.value?"Loading...":"Change Password",loading:r.value,disable:r.value},null,8,["label","loading","disable"])]),t.value?(i(),p("div",U,_(t.value),1)):v("",!0),u.value?(i(),p("div",k,_(u.value),1)):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},M=x(R,[["__scopeId","data-v-73884919"]]);export{M as default};
